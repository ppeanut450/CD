<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>음식점 지역별 검색</title>
  <style>
    #map {
      width: 100%;
      height: 400px;
    }
  </style>
</head>
<body>
  <div>
    <select id="categorySelect">
      <option value="">전체</option>
      <option value="경기도">경기도</option>
      <option value="충청남도">충청남도</option>
      <option value="충청북도">충청북도</option>
      <option value="서울특별시">서울특별시</option>
      <option value="강원도">강원도</option>
      <!-- 다른 지역도 추가 -->
    </select>
    <input type="text" id="searchInput" placeholder="음식점 검색">
    <button id="searchButton">검색</button>
  </div>
  <div id="map"></div>

  <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=0560729fbda53d06035a69b6f812c484"></script>
  <script>
    var mapContainer = document.getElementById('map');
    var mapOptions = {
      center: new kakao.maps.LatLng(37.5665, 126.9780),
      level: 8
    };

    var map = new kakao.maps.Map(mapContainer, mapOptions);

    var places = new kakao.maps.services.Places();

    var categorySelect = document.getElementById('categorySelect');
    var searchInput = document.getElementById('searchInput');
    var searchButton = document.getElementById('searchButton');

    categorySelect.addEventListener('change', function() {
      var category = categorySelect.value;

      if (category === '') {
        map.setLevel(8);
        map.panTo(new kakao.maps.LatLng(37.5665, 126.9780));
      } else {
        var geocoder = new kakao.maps.services.Geocoder();

        geocoder.addressSearch(category, function(result, status) {
          if (status === kakao.maps.services.Status.OK) {
            var bounds = new kakao.maps.LatLngBounds();

            for (var i = 0; i < result.length; i++) {
              var marker = new kakao.maps.Marker({
                position: new kakao.maps.LatLng(result[i].y, result[i].x)
              });
              marker.setMap(map);
              bounds.extend(new kakao.maps.LatLng(result[i].y, result[i].x));
            }

            map.setBounds(bounds);
          }
        });
      }
    });

    searchButton.addEventListener('click', function() {
      var query = searchInput.value;

      var center = map.getCenter();
      var level = map.getLevel();

      places.keywordSearch(query, function(result, status) {
        if (status === kakao.maps.services.Status.OK) {
          var bounds = new kakao.maps.LatLngBounds();

          for (var i = 0; i < result.length; i++) {
            var place = result[i];
            var marker = new kakao.maps.Marker({
              map: map,
              position: new kakao.maps.LatLng(place.y, place.x)
            });

            bounds.extend(new kakao.maps.LatLng(place.y, place.x));
          }

          map.setBounds(bounds);
        }
      });
    });
  </script>
</body>
</html>
